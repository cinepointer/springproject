<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>CinePointer - ë©”ì¸</title>
    <meta name="description" content="ìµœì‹  ì¸ê¸° ì˜í™”, ì¶”ì²œì‘, ì¥ë¥´ë³„ ì˜í™”ê¹Œì§€ ëª¨ë‘ ë³¼ ìˆ˜ ìˆëŠ” ì˜í™” ì „ë¬¸ í”Œë«í¼ CinePointer">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <!-- Splide ìŠ¬ë¼ì´ë” -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/splide@4.0.7/dist/splide.min.css">
    <!-- í†µí•© ì»¤ìŠ¤í…€ CSS -->
    <link rel="stylesheet" href="/css/style.css">
    <style>

.movie-card {
    background: #181818;
    border-radius: 8px;
    box-shadow: 0 2px 12px #000b;
    border: none;
    width: 160px;
    min-width: 130px;
    color: #fff;
    text-align: left;
    transition: 
        transform 0.16s cubic-bezier(.4,0,.2,1), 
        box-shadow 0.16s, 
        outline 0.14s;
    cursor: pointer;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    padding: 12px 10px 10px 10px;
    position: relative;
    overflow: hidden;
}

.movie-card:hover, .movie-card:focus {
    transform: scale(1.07);
    box-shadow: 0 8px 32px #e5091444, 0 2px 12px #000b;
    outline: 2.5px solid #e50914;
    z-index: 2;
}

.movie-poster {
    width: 100%;
    max-width: 160px;
    height: 220px;
    object-fit: cover;
    border-radius: 4px;
    box-shadow: 0 4px 16px #000a;
    margin-bottom: 10px;
    background: #222;
    transition: box-shadow 0.18s;
}
.movie-card:hover .movie-poster {
    box-shadow: 0 6px 32px #e5091455, 0 4px 16px #000b;
}

/* ì¹´ë“œ ë‚´ë¶€ í…ìŠ¤íŠ¸ */
.movie-card .title {
    font-size: 1.07rem;
    font-weight: 700;
    color: #fff;
    margin: 6px 0 2px 2px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    line-height: 1.1;
}
.movie-card .desc {
    color: #b3b3b3;
    font-size: 0.96rem;
    margin: 0 0 7px 2px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    line-height: 1.2;
}

/* ====== ì¸ê¸°ì˜í™” ìŠ¬ë¼ì´ë”(í¬ì¸íŠ¸ ê°•ì¡°) ====== */
.splide__slide a {
    display: block;
    background: #222;
    border-radius: 8px;
    box-shadow: 0 2px 12px #000a;
    padding: 12px 10px 10px 10px;
    text-align: center;
    border: none;
    transition: 
        transform 0.17s cubic-bezier(.4,0,.2,1), 
        box-shadow 0.18s, 
        outline 0.14s;
    position: relative;
    overflow: hidden;
}
.splide__slide a:hover, .splide__slide a:focus {
    transform: scale(1.09) rotate(-1deg);
    box-shadow: 0 10px 36px #e5091466, 0 2px 12px #000b;
    outline: 2.5px solid #e50914;
    z-index: 3;
}
.splide__slide a::after {
    /* ë ˆë“œ ê¸€ë¡œìš° í¬ì¸íŠ¸ íš¨ê³¼ */
    content: "";
    display: block;
    position: absolute;
    left: 50%; top: 50%;
    width: 80%; height: 90%;
    pointer-events: none;
    border-radius: 10px;
    transform: translate(-50%, -50%);
    box-shadow: 0 0 0 0 #e5091440, 0 0 0 0 #e5091410;
    transition: box-shadow 0.35s;
}
.splide__slide a:hover::after {
    box-shadow: 0 0 32px 8px #e5091440, 0 0 4px 0 #e5091410;
}

/* ìŠ¬ë¼ì´ë” ë‚´ë¶€ í¬ìŠ¤í„° íš¨ê³¼ */
.splide__slide a .movie-poster {
    transition: box-shadow 0.18s;
}
.splide__slide a:hover .movie-poster {
    box-shadow: 0 8px 32px #e5091455, 0 4px 16px #000b;
}

/* ìŠ¬ë¼ì´ë” íƒ€ì´í‹€ ê°•ì¡° */
.splide__slide .title {
    font-size: 1.07rem;
    font-weight: 700;
    color: #fff;
    margin: 6px 0 2px 2px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    line-height: 1.1;
    letter-spacing: 0.01em;
    text-shadow: 0 1px 6px #e5091422;
}
.splide__slide .desc {
    color: #b3b3b3;
    font-size: 0.96rem;
    margin: 0 0 7px 2px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    line-height: 1.2;
}

/* ====== ë°˜ì‘í˜• ====== */
@media (max-width: 1100px) {
    .movie-card { width: 120px; min-width: 100px;}
}
@media (max-width: 800px) {
    .movie-card { width: 95px; min-width: 80px; }
    .movie-poster { max-width: 74px; height: 108px;}
}
@media (max-width: 600px) {
    .movie-card { width: 72px; min-width: 60px; padding: 5px 2px 6px 2px;}
    .movie-poster { max-width: 52px; height: 74px;}
}
</style>
    
</head>
<body>
    <!-- í—¤ë” -->
    <th:block th:replace="~{fragment/header.html :: headerFragment}"></th:block>

    <div class="container main-flex">
        
        <!-- ë©”ì¸ ì»¨í…ì¸  -->
        <main class="main-content">

            <!-- ì¸ê¸° ì˜í™” ìŠ¬ë¼ì´ë” -->
            <section class="main-section" id="popular">
                <h1>ğŸ”¥ ì¸ê¸° ì˜í™”</h1>
                <div id="popular-slider" class="splide">
                    <div class="splide__track">
                        <ul class="splide__list">
                            <li class="splide__slide" th:each="movie : ${popularMovies}">
                                <a th:href="@{/movies/{id}(id=${movie.id})}" th:title="|ìƒì„¸ë³´ê¸°: ${movie.title}|">
                                    <img
                                        th:src="@{'https://image.tmdb.org/t/p/w200/' + ${movie.posterPath}}"
                                        th:alt="|${movie.title} í¬ìŠ¤í„°|" loading="lazy" class="movie-poster">
                                    <div class="title" th:text="${movie.title}">ì˜í™” ì œëª©</div>
                                    <div class="desc" th:text="|ì¶œì—°: ${#lists.isEmpty(movie.actors) ? 'ì •ë³´ ì—†ìŒ' : #strings.arrayJoin(movie.actors, ', ')}|">ì¶œì—°ì§„</div>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- ìµœì‹  ê°œë´‰ì‘ -->
            <section class="main-section" id="latest">
                <h2>ğŸ¬ ìµœì‹  ê°œë´‰ì‘</h2>
                <div class="movie-list">
                    <a class="movie-card" th:each="movie : ${latestMovies}" th:href="@{/movies/{id}(id=${movie.id})}" th:title="|ìƒì„¸ë³´ê¸°: ${movie.title}|">
                        <img
                            th:src="@{'https://image.tmdb.org/t/p/w200/' + ${movie.posterPath}}"
                            th:alt="|${movie.title} í¬ìŠ¤í„°|" loading="lazy" class="movie-poster">
                        <div class="title" th:text="${movie.title}">ì˜í™” ì œëª©</div>
                        <div class="desc" th:text="|ì¶œì—°: ${#lists.isEmpty(movie.actors) ? 'ì •ë³´ ì—†ìŒ' : #strings.arrayJoin(movie.actors, ', ')}|">ì¶œì—°ì§„</div>
                    </a>
                </div>
            </section>

            <!-- ì¥ë¥´ë³„ ì˜í™” -->
            <section class="main-section" id="genre" >
                <h2>ğŸï¸ ì¥ë¥´ë³„ ì˜í™”</h2>
                <div th:each="genre : ${genres}">
                    <h3 th:text="${genre.name}">ì¥ë¥´ëª…</h3>
                    <div class="movie-list">
                        <a class="movie-card" th:each="movie : ${genre.movies}" th:href="@{/movies/{id}(id=${movie.id})}" th:title="|ìƒì„¸ë³´ê¸°: ${movie.title}|">
                            <img
                                th:src="@{'https://image.tmdb.org/t/p/w200/' + ${movie.posterPath}}"
                                th:alt="|${movie.title} í¬ìŠ¤í„°|" loading="lazy" class="movie-poster">
                            <div class="title" th:text="${movie.title}">ì˜í™” ì œëª©</div>
                            <div class="desc" th:text="|ì¶œì—°: ${#lists.isEmpty(movie.actors) ? 'ì •ë³´ ì—†ìŒ' : #strings.arrayJoin(movie.actors, ', ')}|">ì¶œì—°ì§„</div>
                        </a>
                    </div>
                </div>
            </section>

            <!-- ì¶”ì²œ ì˜í™” -->
            <section class="main-section" id="recommend">
                <h2>â­ ì¶”ì²œ ì˜í™”</h2>
                <div class="movie-list">
                    <a class="movie-card" th:each="movie : ${recommendedMovies}" th:href="@{/movies/{id}(id=${movie.id})}" th:title="|ìƒì„¸ë³´ê¸°: ${movie.title}|">
                        <img
                            th:src="@{'https://image.tmdb.org/t/p/w200/' + ${movie.posterPath}}"
                            th:alt="|${movie.title} í¬ìŠ¤í„°|" loading="lazy" class="movie-poster">
                        <div class="title" th:text="${movie.title}">ì˜í™” ì œëª©</div>
                        <div class="desc" th:text="|ì¶œì—°: ${#lists.isEmpty(movie.actors) ? 'ì •ë³´ ì—†ìŒ' : #strings.arrayJoin(movie.actors, ', ')}|">ì¶œì—°ì§„</div>
                    </a>
                </div>
            </section>
        </main>
    </div>

    <!-- í‘¸í„° -->
    <th:block th:replace="~{fragment/footer.html :: footerFragment}"></th:block>

    <!-- Splide ìŠ¬ë¼ì´ë” ìŠ¤í¬ë¦½íŠ¸ (í•„ìš”ì‹œ) -->
    <script src="https://cdn.jsdelivr.net/npm/splide@4.0.7/dist/splide.min.js"></script>
    <!-- ë©”ì¸ JS: ì‹¤ì‹œê°„ ê²€ìƒ‰ ë° ê¸°íƒ€ ê¸°ëŠ¥ -->
    <script src="/js/main.js"></script>
</body>
</html>
