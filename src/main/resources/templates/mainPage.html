<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>CinePointer - ë©”ì¸</title>
    <meta name="description" content="ìµœì‹  ì¸ê¸° ì˜í™”, ì¶”ì²œì‘, ì¥ë¥´ë³„ ì˜í™”ê¹Œì§€ ëª¨ë‘ ë³¼ ìˆ˜ ìˆëŠ” ì˜í™” ì „ë¬¸ í”Œë«í¼ CinePointer">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/style.css">
    <!-- Bootstrap CDN í•„ìš”ì‹œ ì•„ë˜ ì¶”ê°€ -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/splide@4.0.7/dist/js/splide.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/splide@4.0.7/dist/css/splide.min.css">
</head>
<body>
    <!-- ê³µí†µ í—¤ë” -->
    <th:block th:replace="fragment/header.html :: headerFragment"></th:block>

    <div class="container mt-4" style="display:flex; gap:32px;">
        <!-- ì‚¬ì´ë“œë°” -->
        <div style="min-width:180px;">
            <th:block th:replace="fragment/sidebar.html :: sidebarFragment"></th:block>
        </div>

        <!-- ë©”ì¸ ì»¨í…ì¸  -->
        <main style="flex:1;">
            <!-- ì¸ê¸° ì˜í™” ìŠ¬ë¼ì´ë” -->
            <section class="main-section">
                <h1 style="margin-bottom:16px;">ğŸ”¥ ì¸ê¸° ì˜í™”</h1>
                <div id="popular-slider" class="splide" style="margin-bottom:40px;">
                    <div class="splide__track">
                        <ul class="splide__list">
                            <li class="splide__slide" th:each="movie : ${popularMovies}">
                                <a th:href="@{/movies/{id}(id=${movie.id})}" title="ìƒì„¸ë³´ê¸°: [[${movie.title}]]">
                                    <img th:src="${movie.posterUrl}" alt="[[${movie.title}]] í¬ìŠ¤í„°">
                                    <div class="slide-title" th:text="${movie.title}">ì˜í™” ì œëª©</div>
                                    <div class="slide-desc" th:text="'ê°ë…: ' + ${movie.director}">ê°ë…</div>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- ìµœì‹  ê°œë´‰ì‘ -->
            <section class="main-section">
                <h2>ğŸ¬ ìµœì‹  ê°œë´‰ì‘</h2>
                <div class="movie-list">
                    <a th:each="movie : ${latestMovies}" th:href="@{/movies/{id}(id=${movie.id})}" title="ìƒì„¸ë³´ê¸°: [[${movie.title}]]">
                        <img th:src="${movie.posterUrl}" alt="[[${movie.title}]] í¬ìŠ¤í„°">
                        <div th:text="${movie.title}">ì˜í™” ì œëª©</div>
                    </a>
                </div>
            </section>

            <!-- ì¥ë¥´ë³„ ì˜í™” -->
            <section class="main-section">
                <h2>ğŸï¸ ì¥ë¥´ë³„ ì˜í™”</h2>
                <div th:each="genre : ${genres}">
                    <h3 th:text="${genre.name}">ì¥ë¥´ëª…</h3>
                    <div class="movie-list">
                        <a th:each="movie : ${genre.movies}" th:href="@{/movies/{id}(id=${movie.id})}" title="ìƒì„¸ë³´ê¸°: [[${movie.title}]]">
                            <img th:src="${movie.posterUrl}" alt="[[${movie.title}]] í¬ìŠ¤í„°">
                            <div th:text="${movie.title}">ì˜í™” ì œëª©</div>
                        </a>
                    </div>
                </div>
            </section>

            <!-- ì¶”ì²œ ì˜í™” -->
            <section class="main-section">
                <h2>â­ ì¶”ì²œ ì˜í™”</h2>
                <div class="movie-list">
                    <a th:each="movie : ${recommendedMovies}" th:href="@{/movies/{id}(id=${movie.id})}" title="ìƒì„¸ë³´ê¸°: [[${movie.title}]]">
                        <img th:src="${movie.posterUrl}" alt="[[${movie.title}]] í¬ìŠ¤í„°">
                        <div th:text="${movie.title}">ì˜í™” ì œëª©</div>
                    </a>
                </div>
            </section>
        </main>
    </div>

    <!-- ê³µí†µ í‘¸í„° -->
    <th:block th:replace="fragment/footer.html :: footerFragment"></th:block>

    <!-- ì¸ê¸° ì˜í™” ìŠ¬ë¼ì´ë” ìŠ¤í¬ë¦½íŠ¸ -->
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        new Splide('#popular-slider', {
          type   : 'loop',
          perPage: 4,
          gap    : '24px',
          breakpoints: {
            900: { perPage: 2 },
            600: { perPage: 1 }
          }
        }).mount();
      });
    </script>
</body>
</html>
